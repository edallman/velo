!function(e){e.fn.disableSelection_dropotron=function(){return e(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},e.fn.dropotron=function(t){if(1<this.length)for(var o=0;o<this.length;o++)e(this[o]).dropotron(t);return e.dropotron(e.extend({selectorParent:e(this)},t))},e.dropotron=function(t){var o=e.extend({selectorParent:null,baseZIndex:1e3,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},t),s=o.selectorParent,n=s.find("ul"),i=e("html"),a=!1,l=null,r=null;s.on("doCollapseAll",function(){n.trigger("doCollapse")}),n.each(function(){var t=e(this),s=t.parent();0<o.hideDelay&&t.add(s).on("mouseleave",function(){window.clearTimeout(r),r=window.setTimeout(function(){t.trigger("doCollapse")},o.hideDelay)}),t.disableSelection_dropotron().hide().addClass(o.menuClass).css("position","absolute").on("mouseenter",function(){window.clearTimeout(r)}).on("doExpand",function(){if(t.is(":visible"))return!1;window.clearTimeout(r),n.each(function(){var t=e(this);e.contains(t.get(0),s.get(0))||t.trigger("doCollapse")});var l=s.offset(),d=s.position();s.parent().position();var c,f,p,u=s.outerWidth(),h=t.outerWidth(),g=t.css("z-index")==o.baseZIndex;if(g){switch(c=o.detach?l:d,p=c.top+s.outerHeight()+o.globalOffsetY,f=o.alignment,t.removeClass("left").removeClass("right").removeClass("center"),o.alignment){case"right":l=c.left-h+u,0>l&&(l=c.left,f="left");break;case"center":l=c.left-Math.floor((h-u)/2),0>l?(l=c.left,f="left"):l+h>i.width()&&(l=c.left-h+u,f="right");break;default:l=c.left,l+h>i.width()&&(l=c.left-h+u,f="right")}t.addClass(f)}else switch("relative"==s.css("position")||"absolute"==s.css("position")?(p=o.offsetY,l=-1*d.left):(p=d.top+o.offsetY,l=0),o.alignment){case"right":l+=-1*s.parent().outerWidth()+o.offsetX;break;default:l+=s.parent().outerWidth()+o.offsetX}switch(navigator.userAgent.match(/MSIE ([0-9]+)\./)&&8>RegExp.$1&&(l+=o.IEOffsetX,p+=o.IEOffsetY),t.css("left",l+"px").css("top",p+"px"),t.css("opacity","0.01").show(),u=!1,l="relative"==s.css("position")||"absolute"==s.css("position")?-1*d.left:0,0>t.offset().left?(l+=s.parent().outerWidth()-o.offsetX,u=!0):t.offset().left+h>i.width()&&(l+=-1*s.parent().outerWidth()-o.offsetX,u=!0),u&&t.css("left",l+"px"),t.hide().css("opacity","1"),o.mode){case"zoom":a=!0,s.addClass(o.openerActiveClass),t.animate({width:"toggle",height:"toggle"},o.speed,o.easing,function(){a=!1});break;case"slide":a=!0,s.addClass(o.openerActiveClass),t.animate({height:"toggle"},o.speed,o.easing,function(){a=!1});break;case"fade":a=!0,g&&!o.noOpenerFade?(u="slow"==o.speed?80:"fast"==o.speed?40:Math.floor(o.speed/2),s.fadeTo(u,.01,function(){s.addClass(o.openerActiveClass),s.fadeTo(o.speed,1),t.fadeIn(o.speed,function(){a=!1})})):(s.addClass(o.openerActiveClass),s.fadeTo(o.speed,1),t.fadeIn(o.speed,function(){a=!1}));break;default:s.addClass(o.openerActiveClass),t.show()}return!1}).on("doCollapse",function(){return t.is(":visible")?(t.hide(),s.removeClass(o.openerActiveClass),t.find("."+o.openerActiveClass).removeClass(o.openerActiveClass),t.find("ul").hide(),!1):!1}).on("doToggle",function(){return t.is(":visible")?t.trigger("doCollapse"):t.trigger("doExpand"),!1}),s.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click",function(e){a||(e.preventDefault(),e.stopPropagation(),t.trigger("doToggle"))}),"hover"==o.expandMode&&s.hover(function(){a||(l=window.setTimeout(function(){t.trigger("doExpand")},o.hoverDelay))},function(){window.clearTimeout(l)})}),n.find("a").css("display","block").on("click",function(t){a||(s.trigger("doCollapseAll"),t.stopPropagation(),1>e(this).attr("href").length&&t.preventDefault())}),s.find("li").css("white-space","nowrap").each(function(){var t=e(this),o=t.children("a"),n=t.children("ul");o.on("click",function(t){1>e(this).attr("href").length?t.preventDefault():t.stopPropagation()}),0<o.length&&0==n.length&&t.on("click",function(e){a||(s.trigger("doCollapseAll"),e.stopPropagation())})}),s.children("li").each(function(){var t,s=e(this).children("ul");if(0<s.length){o.detach&&(o.cloneOnDetach&&(t=s.clone(),t.attr("class","").hide().appendTo(s.parent())),s.detach().appendTo("body")),t=o.baseZIndex;for(var n=1;0<s.length;n++)s.css("z-index",t++),o.submenuClassPrefix&&s.addClass(o.submenuClassPrefix+(t-1-o.baseZIndex)),s=s.find("> li > ul")}}),i.on("click",function(){a||s.trigger("doCollapseAll")}).on("keypress",function(e){a||27!=e.keyCode||(e.preventDefault(),s.trigger("doCollapseAll"))})}}(jQuery);